/* Light/Dark theme variables */
:root {
  --bg: #ffffff;
  --bg-alt: #f5f5f7;
  --text: #1a1a1a;
  --border: #d0d0d0;
  --primary: #2563eb;
  --danger: #dc2626;
  --radius: 8px;
  --transition: 0.25s ease;
}
.theme-dark, [data-theme="dark"], .theme-dark :root {
  --bg: #0f172a;
  --bg-alt: #1e293b;
  --text: #f1f5f9;
  --border: #334155;
  --primary: #3b82f6;
  --danger: #f87171;
}
body, .app { background: var(--bg); color: var(--text); font-family: system-ui, Arial, sans-serif; margin:0; min-height:100vh; }
.container { padding: 1rem clamp(1rem, 2vw, 2rem); }
a { color: var(--primary); text-decoration:none; }
a:hover { text-decoration:underline; }

/* Navbar */
.navbar { display:flex; align-items:center; gap:1rem; padding:0.75rem 1rem; background:var(--bg-alt); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
.navbar .logo { margin:0; font-size:1.1rem; }
.navbar ul { list-style:none; display:flex; gap:0.75rem; margin:0; padding:0; }
.navbar a.active { font-weight:600; }
.nav-toggle { display:none; }
@media (max-width: 900px){
  .navbar ul { flex-direction:column; position:absolute; left:0; right:0; top:56px; background:var(--bg-alt); padding:1rem; display:none; }
  body.nav-open .navbar ul { display:flex; }
  .nav-toggle { display:block; background:none; border:1px solid var(--border); padding:0.5rem 0.75rem; border-radius:var(--radius); }
}

/* Layout */
.grid { display:grid; gap:1rem; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); margin-top:1rem; }
.flex { display:flex; }
.gap { gap:1rem; }
.wrap { flex-wrap:wrap; }
.inline-form { display:flex; gap:0.5rem; margin:1rem 0; }

/* Cards */
.card { background:var(--bg-alt); border:1px solid var(--border); border-radius:var(--radius); padding:1rem; display:flex; flex-direction:column; gap:0.5rem; box-shadow:0 1px 2px rgba(0,0,0,0.06); }
.card h3 { margin:0 0 .25rem; font-size:1rem; }
.card-footer { margin-top:auto; font-size:0.85rem; opacity:0.8; }
.chart-placeholder { background: repeating-linear-gradient(45deg, var(--bg), var(--bg) 10px, var(--bg-alt) 10px, var(--bg-alt) 20px); border:1px dashed var(--border); padding:2rem; text-align:center; border-radius:var(--radius); }

/* Buttons & inputs */
button, input, select { font: inherit; padding:0.5rem 0.75rem; border:1px solid var(--border); border-radius:var(--radius); background:var(--bg); color:var(--text); }
button { cursor:pointer; background:var(--primary); color:#fff; border-color:var(--primary); transition:var(--transition); }
button:hover { filter:brightness(1.1); }
button:disabled { opacity:0.5; cursor:not-allowed; }
input, select { background:var(--bg-alt); }

/* Status */
.loading { padding:0.5rem 0; opacity:0.8; }
.error { color:var(--danger); font-weight:600; }
.correct { background: #16a34a !important; color:#fff; }
.wrong { background:#dc2626 !important; color:#fff; }

img { border-radius:var(--radius); }

/* Theme switcher */
.theme-switcher { position:fixed; bottom:1rem; right:1rem; z-index:100; }
.theme-switcher button { background:var(--bg-alt); color:var(--text); border:1px solid var(--border); }

/* Utilities */
blockquote { margin:0; font-style:italic; }

/* TODO: Add prefers-color-scheme auto detection */

/* Weather Page Backgrounds & Animations */
.weather-page {
  position: relative;
  min-height: 100vh;
  overflow: visible; /* allow overlay filters and SVGs to extend without clipping */
}

/* Background crossfade layers */
.bg-layer {
  position: fixed; 
  inset: 0; 
  z-index: -10; 
  transition: opacity 1s cubic-bezier(0.22, 1, 0.36, 1); 
  opacity: 1; 
  pointer-events: none;
}
.bg-layer + .bg-layer { opacity: 0; }

/* Weather background gradients */
.weather-bg-sunny {
  /* light blue sunny background */
  background: linear-gradient(135deg, #e6f7ff 0%, #cdeeff 50%, #a6ddff 100%) !important;
}
.weather-bg-rain {
  background: linear-gradient(135deg, #bdc3c7 0%, #2c3e50 50%, #34495e 100%) !important;
}
.weather-bg-cloud {
  background: linear-gradient(135deg, #ece9e6 0%, #ffffff 50%, #f8f9fa 100%) !important;
}
.weather-bg-snow {
  background: linear-gradient(135deg, #e0eafc 0%, #cfdef3 50%, #a8c0ff 100%) !important;
}
.weather-bg-fog {
  background: linear-gradient(135deg, #bdc3c7 0%, #757f9a 50%, #5c6b8a 100%) !important;
}
.weather-bg-storm {
  background: linear-gradient(135deg, #2c3e50 0%, #34495e 50%, #1a252f 100%) !important;
}
.weather-bg-default {
  background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 50%, #4facfe 100%) !important;
}

/* Decorative animation layer */
.weather-anim-layer {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: -5;
  mix-blend-mode: normal;
}
.weather-page > * { position: relative; z-index: 1; }

/* Debug styles to make elements visible */
.text-dark {
  color: #000 !important;
  font-size: 2rem !important;
  background: rgba(255, 255, 255, 0.8) !important;
  padding: 1rem !important;
  border-radius: 8px !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 1000;
}

/* Sun animation */
.sun-wrap { 
  position: absolute; 
  right: 8%; 
  top: 10%; 
  width: 180px; 
  height: 180px; 
  display: flex; 
  align-items: center; 
  justify-content: center; 
}
.sun {
  width: 72px;
  height: 72px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff8b0, #ffd36b 40%, rgba(255, 183, 77, 0.95) 60%);
  box-shadow: 0 0 40px 12px rgba(255,200,80,0.12), 0 0 80px 36px rgba(255,183,77,0.06);
  position: relative;
  z-index: 2;
  animation: sun-pulse 6s ease-in-out infinite, sun-bob 10s ease-in-out infinite;
}

/* rotating soft rays using a conic-like band (repeating pattern) */
.sun::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 180%;
  height: 180%;
  transform: translate(-50%, -50%) rotate(0deg);
  border-radius: 50%;
  background: conic-gradient(from 0deg, rgba(255,200,80,0.14) 0deg 20deg, rgba(255,200,80,0.02) 20deg 40deg, rgba(255,200,80,0.14) 40deg 60deg, rgba(255,200,80,0.02) 60deg 80deg, rgba(255,200,80,0.14) 80deg 100deg, rgba(255,200,80,0.02) 100deg 120deg, rgba(255,200,80,0.14) 120deg 140deg, rgba(255,200,80,0.02) 140deg 160deg, rgba(255,200,80,0.14) 160deg 180deg, rgba(255,200,80,0.02) 180deg 200deg, rgba(255,200,80,0.14) 200deg 220deg, rgba(255,200,80,0.02) 220deg 240deg, rgba(255,200,80,0.14) 240deg 260deg, rgba(255,200,80,0.02) 260deg 280deg, rgba(255,200,80,0.14) 280deg 300deg, rgba(255,200,80,0.02) 300deg 320deg, rgba(255,200,80,0.14) 320deg 340deg, rgba(255,200,80,0.02) 340deg 360deg);
  filter: blur(6px) saturate(110%);
  animation: sun-rotate 40s linear infinite;
  z-index: 0;
}

/* soft halo */
.sun::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  width: 250%;
  height: 250%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  background: radial-gradient(circle at 50% 40%, rgba(255,230,140,0.28), rgba(255,180,60,0.08) 40%, transparent 60%);
  filter: blur(18px) saturate(110%);
  z-index: -1;
  opacity: 0.95;
}

@keyframes sun-pulse {
  0%, 100% { transform: scale(1); opacity: 0.98; }
  50% { transform: scale(1.05); opacity: 1; }
}

@keyframes sun-rotate {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  100% { transform: translate(-50%, -50%) rotate(360deg); }
}

@keyframes sun-bob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-6px); }
}

/* Cloud animations — fluffy clouds using layered circles */
.cloud {
  position: absolute;
  top: 12%;
  width: 260px;
  height: 80px;
  background: transparent;
  pointer-events: none;
}

/* SVG-based clouds */
.cloud-svg { position: absolute; pointer-events: none; display: block; opacity: 1; /* fully opaque */
  /* crisp but soft shadow */
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.1));
}
.cloud-svg .cloud-shape { fill: #ffffff; stroke: rgba(0,0,0,0.09); stroke-width: 0.9; }

/* small lift to emphasize roundness */
.cloud-svg g { transform-box: fill-box; transform-origin: center; }
.cloud-svg g path { transform: translateY(-2px); }

/* Slight desaturation for far clouds to create depth */
.cloud--extra { opacity: 0.9; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.08)); }

.cloud--left { left: -10%; transform: translateZ(0) scale(0.65); animation: cloud-drift 28s linear infinite; }
.cloud--mid { left: 18%; top: 22%; transform: translateZ(0) scale(0.85); animation: cloud-drift 40s linear infinite; }
.cloud--right { right: -5%; top: 60%; transform: translateZ(0) scale(0.6); animation: cloud-drift 32s linear infinite reverse; }

.cloud--extra { position: absolute; background: transparent; }
.cloud--a { left: 5%; top: 36%; transform: translateZ(0) scale(1.05); animation: cloud-drift 46s linear infinite; }
.cloud--b { left: 50%; top: 18%; transform: translateZ(0) scale(0.98); animation: cloud-drift 36s linear infinite reverse; }
.cloud--c { right: 10%; top: 8%; transform: translateZ(0) scale(0.85); animation: cloud-drift 52s linear infinite; }

/* main cloud body uses multiple radial gradients for subtle shading */
.cloud::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -40%);
  width: 220px;
  height: 70px;
  border-radius: 50%;
  background: radial-gradient(closest-side at 30% 40%, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.95) 40%, rgba(255,255,255,0.9) 60%, rgba(255,255,255,0.82) 100%);
  filter: blur(6px);
  box-shadow: 0 10px 24px rgba(0,0,0,0.06);
}

.cloud::after {
  content: '';
  position: absolute;
  left: 18%;
  top: -50%;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: radial-gradient(closest-side, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.9) 60%, rgba(255,255,255,0.75) 100%);
  filter: blur(5px);
  box-shadow: 0 8px 18px rgba(0,0,0,0.05);
}

/* Additional lobe (via inner shadow) using an extra pseudo-element for larger clouds */
.cloud .lobe {
  display: none; /* reserved if we need DOM lobes */
}

.cloud--left { left: -10%; transform: scale(0.95); animation: cloud-drift 28s linear infinite; }
.cloud--mid { left: 18%; top: 22%; transform: scale(1.25); animation: cloud-drift 40s linear infinite; }
.cloud--right { right: -5%; top: 60%; transform: scale(0.85); animation: cloud-drift 32s linear infinite reverse; }

/* Extra clouds for depth — use same pseudo-element technique but different sizes/positions */
.cloud--extra { position: absolute; background: transparent; }
.cloud--a::before { width: 340px; height: 120px; transform: translate(-50%, -44%); }
.cloud--a::after { left: 14%; top: 6%; width: 160px; height: 160px; opacity: 0.96; }
.cloud--a { left: 5%; top: 36%; transform: scale(1.05); animation: cloud-drift 46s linear infinite; }

.cloud--b::before { width: 300px; height: 110px; transform: translate(-50%, -44%); }
.cloud--b::after { left: 20%; top: 10%; width: 140px; height: 140px; opacity: 0.9; }
.cloud--b { left: 50%; top: 18%; transform: scale(0.98); animation: cloud-drift 36s linear infinite reverse; }

.cloud--c::before { width: 220px; height: 90px; transform: translate(-50%, -44%); }
.cloud--c::after { left: 66%; top: 6%; width: 110px; height: 110px; opacity: 0.86; }
.cloud--c { right: 10%; top: 8%; transform: scale(0.85); animation: cloud-drift 52s linear infinite; }

@keyframes cloud-drift {
  from { transform: translateX(0); }
  to { transform: translateX(18vw); }
}

/* Rain animations */
.rain-layer { position: absolute; inset: 10% 0 0 0; height: 80%; overflow: visible; }
.raindrop { 
  position: absolute; 
  top: -8%; 
  width: 2px; 
  height: 28vh; 
  background: linear-gradient(180deg, rgba(255,255,255,0.2), rgba(255,255,255,0.02)); 
  opacity: 0.7; 
  transform: translateY(-10vh); 
  border-radius: 2px; 
  animation: fall 1.1s linear infinite; 
}
.storm-rain { 
  background: linear-gradient(180deg, rgba(173,216,230,0.4), rgba(173,216,230,0.1)); 
  animation: fall 0.8s linear infinite; 
}
@keyframes fall { 
  to { transform: translateY(110vh); opacity: 0.2; } 
}

/* Snow animations */
.snow-layer { position: absolute; inset: 0; pointer-events: none; }
.snow-layer { position: absolute; inset: 0; pointer-events: none; }
.snow-layer--back { z-index: 0; }
.snow-layer--front { z-index: 2; }
.snowflake {
  position: absolute;
  top: -10%;
  width: var(--size, 8px);
  height: var(--size, 8px);
  background: rgba(255,255,255,0.95);
  border-radius: 50%;
  filter: blur(0.4px);
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  transform: translateY(-10vh);
  animation: snow-fall var(--dur, 8s) linear infinite;
  opacity: 0.9;
}
/* Snowfall uses horizontal drift via CSS variable to avoid uniform straight lines */
@keyframes snow-fall {
  0% { transform: translateY(-10vh) translateX(0) rotate(0deg); opacity: 0.95; }
  50% { transform: translateY(40vh) translateX(calc(var(--drift) / 2)) rotate(90deg); }
  100% { transform: translateY(110vh) translateX(var(--drift)) rotate(180deg); opacity: 0.7; }
}

/* Fog animations */
.fog { 
  position: absolute; 
  left: 0; 
  right: 0; 
  height: 10%; /* reduce height so bands don't overlap page content */
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02)); 
  filter: blur(6px); 
  opacity: 0.4; 
}
.fog--one { top: 20%; animation: fog-move 18s ease-in-out infinite; }
.fog--two { top: 48%; animation: fog-move 26s ease-in-out infinite reverse; opacity: 0.42; }
@keyframes fog-move { 
  0% { transform: translateX(-5vw); } 
  50% { transform: translateX(6vw); } 
  100% { transform: translateX(-5vw); } 
}

/* Storm animations */
.storm-layer { position: absolute; inset: 0; }
.lightning { 
  position: absolute; 
  top: 20%; 
  left: 30%; 
  width: 2px; 
  height: 60%; 
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.1)); 
  box-shadow: 0 0 20px rgba(255,255,255,0.8); 
  animation: lightning-flash 4s ease-in-out infinite; 
  opacity: 0; 
}
@keyframes lightning-flash { 
  0%, 90%, 100% { opacity: 0; } 
  5%, 10% { opacity: 1; } 
}

/* Ambient shimmer and particles */
.ambient-shimmer { 
  position: absolute; 
  inset: 0; 
  background: linear-gradient(90deg, rgba(255,255,255,0.025) 0%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.025) 100%); 
  mix-blend-mode: overlay; 
  opacity: 0.6; 
  animation: shimmer 8s linear infinite; 
}
@keyframes shimmer { 
  0% { transform: translateX(-30%); } 
  100% { transform: translateX(30%); } 
}

.floating-particles { position: absolute; inset: 0; pointer-events: none; }
.particle { 
  position: absolute; 
  bottom: 0; 
  width: 4px; 
  height: 4px; 
  background: rgba(255, 255, 255, 0.4); 
  border-radius: 50%; 
  animation: float-up linear infinite; 
}
@keyframes float-up { 
  0% { transform: translateY(0) scale(1); opacity: 0.8; } 
  100% { transform: translateY(-100vh) scale(0.5); opacity: 0; } 
}

/* Weather page specific cards with glassmorphism */
.weather-page .card {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 16px;
  padding: 1.5rem;
  margin: 1rem 0;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  transition: all 0.3s ease;
}

.weather-page .card:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

.weather-page .card h3 {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
}

/* Weather form styling */
.weather-form { 
  display: flex;
  gap: 0.75rem; 
  margin: 1rem 0; 
  align-items: center;
  background: none;
}

.weather-input { 
  flex: 1; 
  max-width: 300px; 
  background: rgba(255, 255, 255, 0.4); 
  backdrop-filter: blur(10px); 
  border: 1px solid rgba(255, 255, 255, 0.2); 
  border-radius: 12px; 
  padding: 0.75rem 1rem; 
  color: var(--text); 
  transition: all 0.3s ease; 
}

.weather-input:focus { 
  outline: none; 
  border-color: rgba(59, 130, 246, 0.8); 
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2); 
}

.weather-btn { 
  background: rgba(59, 130, 246, 0.8); 
  color: #fff; 
  border: 1px solid rgba(59, 130, 246, 0.8); 
  border-radius: 12px; 
  padding: 0.75rem 1.5rem; 
  font-weight: 600; 
  transition: all 0.3s ease; 
  cursor: pointer; 
}

.weather-btn:hover { 
  background: rgba(59, 130, 246, 1); 
  transform: translateY(-2px); 
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); 
}

/* Dev tools styling */
.dev-tools { 
  margin-top: 1rem; 
  display: flex; 
  gap: 0.5rem; 
  flex-wrap: wrap; 
}

.dev-btn { 
  font-size: 0.8rem; 
  padding: 0.5rem 0.75rem; 
  background: rgba(255,255,255,0.4); 
  border: 1px solid rgba(255,255,255,0.2); 
  border-radius: 8px; 
  color: var(--text); 
  cursor: pointer; 
  transition: all 0.3s ease; 
}

.dev-btn:hover { 
  background: rgba(255,255,255,0.2); 
  transform: translateY(-1px); 
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .sun, .cloud, .raindrop, .snowflake, .fog, .ambient-shimmer, .particle, .lightning { 
    animation: none !important; 
  }
}

/* Inner content wrapper for weather page - gives spacing while background remains full-bleed */
.weather-inner {
  max-width: 1100px;
  margin: 0 auto;
  padding: 2rem clamp(1rem, 4vw, 3rem);
  box-sizing: border-box;
}

@media (max-width: 640px) {
  .weather-inner { padding: 1rem; }
}

/* Make the Weather page full-bleed inside the global .container
   Compensate for the .container padding so only Weather ignores it */
.container > .weather-page {
  position: relative;
  left: calc(-1 * clamp(1rem, 2vw, 2rem));
  width: calc(100% + 2 * clamp(1rem, 2vw, 2rem));
  padding: 0; /* remove any page-specific padding */
}

/* When the container is narrow (small screens), avoid overflow issues */
@media (max-width: 420px) {
  .container > .weather-page { left: -1rem; width: calc(100% + 2rem); }
}
